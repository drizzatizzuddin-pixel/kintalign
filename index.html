<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plaque Score Generator (SVG Functional)</title>
<style>
/* --- 1. Global Styles --- */
body { 
    font-family: Arial, sans-serif; 
    margin: 20px; 
    user-select: none; 
}
h2, #score { 
    text-align: center; 
}
#score {
    margin-top: 20px; 
    font-size: 18px; 
    font-weight: bold;
}

/* --- 2. Chart Layout --- */
.dental-chart-container {
    max-width: 900px;
    margin: 40px auto 0;
    display: grid;
    gap: 10px; 
    padding: 0 10px;
}
.arch {
    display: flex;
    justify-content: center;
}
.quadrant {
    display: flex; 
    padding: 0 5px; 
}
.quadrant.right {
    flex-direction: row-reverse;
}

/* --- 3. Tooth Styling (SVG-Based) --- */
.tooth {
    position: relative;
    width: 32px; 
    height: 32px; 
    margin: 0 1px;
    box-sizing: border-box; 
    cursor: pointer;
}

.tooth-diagram {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

/* Style for the SVG Paths (the surfaces) */
.surface-path {
    fill: white; 
    stroke: black; 
    stroke-width: 1;
    transition: fill 0.1s;
    cursor: pointer;
}

/* Plaque Marking: Change the SVG fill color */
.surface-path.plaque {
    fill: #990099 !important; /* Purple plaque color */
}


/* --- Missing Tooth Styling --- */
.tooth.missing {
    opacity: 0.5;
    pointer-events: none; 
}
.tooth.missing .surface-path {
    fill: #a9a9a9 !important; /* Gray fill for missing teeth */
    stroke: #777 !important;
}

/* --- 4. Numbering (Labels) --- */
.number-label {
    position: absolute;
    font-size: 10px;
    width: 100%;
    text-align: center;
    line-height: 1;
    font-weight: normal;
    z-index: 10;
}
.upper-arch .number-label { top: -15px; }
.lower-arch .number-label { bottom: -15px; }
</style>
</head>
<body>

<h2>Dental Plaque Chart (Click to Mark Plaque)</h2>

<div class="dental-chart-container">
    <div class="arch upper-arch">
        <div class="quadrant right" id="q1"></div>
        <div class="quadrant left" id="q2"></div>
    </div>
    <div class="arch lower-arch">
        <div class="quadrant right" id="q4"></div>
        <div class="quadrant left" id="q3"></div>
    </div>
</div>

<h3 id="score">Plaque Score: 0%</h3>

<div style="text-align: center; margin-top: 15px; font-size: 14px;">
    **Right-click** on a tooth to toggle its **Missing** status (and to undo it).
</div>

<script>
const toothData = {
    'q1': [18, 17, 16, 15, 14, 13, 12, 11], 
    'q2': [21, 22, 23, 24, 25, 26, 27, 28],
    'q3': [31, 32, 33, 34, 35, 36, 37, 38],
    'q4': [41, 42, 43, 44, 45, 46, 47, 48]
};

const posteriorTeeth = [14, 15, 16, 17, 18, 24, 25, 26, 27, 28, 34, 35, 36, 37, 38, 44, 45, 46, 47, 48];
const surfacesPost = ['M', 'D', 'B', 'L', 'O']; // 5 surfaces
const surfacesAnt = ['M', 'D', 'B', 'L'];      // 4 surfaces

let surfacesClicked = 0;
let validSurfaces = 0;

function isPosterior(tNum) {
    return posteriorTeeth.includes(tNum);
}

// ----------------------------------------------------------------------
// --- GENERIC SVG PATH DATA (FUNCTIONAL PLACEHOLDERS) ---
// These path strings define the shape and geometry of the surfaces.
const antSVGPathData = {
    // 4-Surface Anterior Tooth (Simple Trapezoid/Quad view)
    M: "M50 0 L0 10 L0 90 L50 100 L50 0 Z",
    D: "M50 0 L100 10 L100 90 L50 100 L50
