<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plaque Score Generator</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; }
h2 { text-align: center; }
.quadrant-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
.quadrant { border: 1px solid #ccc; border-radius: 8px; padding: 10px; min-width: 220px; }
.quadrant h3 { text-align: center; margin-top: 0; }
.tooth { border: 1px solid #ddd; border-radius: 6px; padding: 6px; margin: 6px; text-align: center; }
.surfaces { display: grid; grid-template-columns: repeat(2, 50px); grid-template-rows: repeat(2, 50px); gap: 5px; justify-content: center; margin-top: 6px; }
.surface { width: 50px; height: 50px; background: #e0e0e0; display: flex; justify-content: center; align-items: center; cursor: pointer; border-radius: 4px; user-select: none; }
.surface.clicked { background: purple !important; color: white; }
.surface.missing { background: #a9a9a9 !important; pointer-events: none; color: white; }
.missing-button { margin-top: 6px; padding: 4px 8px; cursor: pointer; border-radius: 5px; background: #ccc; font-size: 12px; }
#score { text-align: center; margin-top: 20px; font-size: 18px; }
@media(max-width: 768px) { .quadrant-container { flex-direction: column; align-items: center; } }
</style>
</head>
<body>
<h2>Plaque Score Generator</h2>
<div class="quadrant-container" id="quadrants"></div>
<h3 id="score">Plaque Score: 0%</h3>
<script>
const quadrants = [
  { name: 'Upper Right', start: 1, end: 8 },
  { name: 'Upper Left', start: 9, end: 16 },
  { name: 'Lower Left', start: 17, end: 24 },
  { name: 'Lower Right', start: 25, end: 32 }
];

let surfacesClicked = 0;
let missingTeeth = new Set();
const totalSurfaces = 32 * 4;

function updateScore() {
  let validSurfaces = totalSurfaces - missingTeeth.size * 4;
  let percent = validSurfaces === 0 ? 0 : Math.round((surfacesClicked / validSurfaces) * 100);
  document.getElementById('score').innerText = `Plaque Score: ${percent}%`;
}

function toggleSurface(tooth, id) {
  const elem = document.getElementById(id);
  if (elem.classList.contains('clicked')) {
    elem.classList.remove('clicked');
    surfacesClicked--;
  } else {
    elem.classList.add('clicked');
    surfacesClicked++;
  }
  updateScore();
}

function toggleMissing(tooth) {
  const toothDiv = document.getElementById(`tooth-${tooth}`);
  const surfaces = toothDiv.querySelectorAll('.surface');
  if (missingTeeth.has(tooth)) {
    missingTeeth.delete(tooth);
    surfaces.forEach(s => s.classList.remove('missing'));
  } else {
    missingTeeth.add(tooth);
    surfaces.forEach(s => {
      if (s.classList.contains('clicked')) {
        s.classList.remove('clicked');
        surfacesClicked--;
      }
      s.classList.add('missing');
    });
  }
  updateScore();
}

const container = document.getElementById('quadrants');

quadrants.forEach(q => {
  const quadDiv = document.createElement('div');
  quadDiv.className = 'quadrant';
  quadDiv.innerHTML = `<h3>${q.name}</h3>`;
  for (let t = q.start; t <= q.end; t++) {
    const toothDiv = document.createElement('div');
    toothDiv.className = 'tooth';
    toothDiv.id = `tooth-${t}`;
    toothDiv.innerHTML = `
      <strong>Tooth ${t}</strong>
      <div class='surfaces'>
        <div class='surface' id='${t}-M' onclick='toggleSurface(${t}, "${t}-M")'>M</div>
        <div class='surface' id='${t}-D' onclick='toggleSurface(${t}, "${t}-D")'>D</div>
        <div class='surface' id='${t}-B' onclick='toggleSurface(${t}, "${t}-B")'>B</div>
        <div class='surface' id='${t}-L' onclick='toggleSurface(${t}, "${t}-L")'>L</div>
      </div>
      <button class='missing-button' onclick='toggleMissing(${t})'>Missing</button>
    `;
    quadDiv.appendChild(toothDiv);
  }
  container.appendChild(quadDiv);
});
</script>
</body>
</html>
